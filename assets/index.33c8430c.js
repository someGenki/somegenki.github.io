import{c as e,p as l,f as n,g as t,s as a,j as o,k as i,w as p,Q as u,x as r,t as s,o as d}from"./vendor.a5408c18.js";const c={name:"FileUpload",setup(){const l="http://localhost:8080/api/file/upload";return{uploadAttr:{action:l,headers:{token:"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI4IiwiaWF0IjoxNjIxMTQ4NzQ1LCJleHAiOjE2MjE3NTM1NDV9.luk430AQx3BhiYhgyCx0qR5CvbUv3dN9H0rG1y2fgiMbnckFe5n1HknsNg4P6neSDK5gQEEXZxRGCbY4PVot9w"},drag:!0,multiple:!0,onSuccess:e=>{console.log(e)},onError:(e,l,n)=>{alert(e)},beforeUpload:e=>{console.log(e),console.log("type:"+e.type,Math.round(e.size/1024*100/100)+"KB")}},upload1:e(null),fileInput:e(null),action:l,setImage:e=>{const l=e.target.files;console.log(l),alert(`你选择了${l.length}个文件，第一个文件名为${l[0].name}`)}}}};l("data-v-2bb51534");const g={class:"upload-demo"},f={class:"el-upload-demo"},m=o("h1",null,[o("a",{href:"https://element-plus.gitee.io/#/zh-CN/component/upload",target:"_blank"}," EL-Upload上传 ")],-1),h=o("p",null,[s(" element-plus自带组件，通过点击或者拖拽上传文件，更多细节 "),o("b",null,"见源码")],-1),I=o("p",null,"文档参数很多，最常用的回调函数:onSuccess、onError、beforeUpload",-1),v=o("p",null,"请求细节:Request Method:Post、Content-Type: multipart/form-data;",-1),b=o("p",null,"SpringBoot控制层参数接受文件的方式:(MultipartFile file)作为参数",-1),y=o("p",null,"同时配置文件中spring.servlet.multipart.enabled属性需为true",-1),k=o("i",{class:"el-icon-upload"},null,-1),x=o("div",{class:"el-upload__text"},[s(" 将文件拖到此处，或 "),o("em",null,"点击上传")],-1),C=o("div",{class:"el-upload__tip"}," tip:只能上传 jpg/png 文件，且不超过 500kb ",-1),F=s(" 当前action(请求路径)： "),M={class:"custom-upload-demo"},R=o("h1",null,"自定义上传功能",-1),U=o("input",{type:"file",name:"file"},null,-1),_=s(" 👈不想要丑丑的原生上传组件，怎么办？ "),j=o("p",null," 首先给原生的上传组件隐藏起来，添加ref引用，添加接受类型(支持表达式)，添加@change方法 ",-1),E=o("p",null,' 比如:<input hidden type="file" ref="fileInput" @change="setImage" accept="image/*" /> ',-1),N=s(" 当需要 "),A=s(" 选择文件的对话框，调用fileInput.click方法即可,选择文件完后会调用@change的方法 "),w=o("p",null," @change方法的第一个参数event的target属性就是那个input，调用event.target.files即可获取选择的文件 ",-1),z=o("h2",null,"附:FileReader的使用",-1),J=o("pre",null,"  if (typeof FileReader === 'function'){\r\n    const reader = new FileReader()\r\n    reader.onload = (event) => {\r\n      imgSrc.value = event.target.result\r\n    }\r\n    reader.readAsDataURL(file)\r\n  } else {\r\n    alert('不支持FileReader API')\r\n  }\r\n    ",-1);n(),c.render=function(e,l,n,s,c,Q){const S=t("el-upload");return d(),a("div",g,[o("div",f,[m,h,I,v,b,y,i(S,u({ref:"upload1",style:{"max-width":"360px"}},s.uploadAttr),{tip:p((()=>[C])),default:p((()=>[k,x])),_:1},16),o("p",null,[F,o("span",null,r(s.action),1)])]),o("div",M,[R,o("div",null,[U,_,o("input",{hidden:"",multiple:"",type:"file",ref:"fileInput",name:"image",onChange:l[0]||(l[0]=(...e)=>s.setImage&&s.setImage(...e)),accept:"image/*"},null,544)]),j,E,o("p",null,[N,o("button",{onClick:l[1]||(l[1]=(...e)=>s.fileInput.click&&s.fileInput.click(...e))},"弹出"),A]),w,z,J])])},c.__scopeId="data-v-2bb51534";export{c as default};
